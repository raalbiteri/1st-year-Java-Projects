<html>
<head>
<title>Guitar.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: rgb(0,0,0); font-weight: normal; font-style: normal; }
.s0 { color: rgb(128,128,128); font-style: italic; }
.s1 { color: rgb(0,0,0); }
.s2 { color: rgb(0,0,128); font-weight: bold; }
.s3 { color: rgb(128,128,128); font-weight: bold; font-style: italic; }
.s4 { color: rgb(0,0,255); }
.s5 { color: rgb(0,128,0); font-weight: bold; }
.s6 { color: rgb(128,128,128); font-style: italic; }
</style>
</head>
<BODY BGCOLOR="#ffffff">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#C0C0C0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
Guitar.java</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">/** 
 * CS2852- 031 
 * Spring 2016 
 * Lab 5 - Guitar Synthesizer 
 * Name: Raunel Albiter 
 * Email: albiterri@msoe.edu 
 * modified: 4/18/2016 
 */</span><span class="s1"> 
 
</span><span class="s2">import </span><span class="s1">java.io.File; 
</span><span class="s2">import </span><span class="s1">java.io.IOException; 
</span><span class="s2">import </span><span class="s1">java.util.LinkedList; 
</span><span class="s2">import </span><span class="s1">java.util.List; 
</span><span class="s2">import </span><span class="s1">java.util.Queue; 
</span><span class="s2">import </span><span class="s1">java.util.Random; 
</span><span class="s2">import </span><span class="s1">javax.sound.sampled.LineUnavailableException; 
</span><span class="s2">import </span><span class="s1">edu.msoe.taylor.audio.Note; 
</span><span class="s2">import </span><span class="s1">edu.msoe.taylor.audio.SimpleAudio; 
 
 
</span><span class="s0">/** 
 * The Guitar class generates guitar sounds based on user input. 
 *  
 * In order to use this class correctly, one must create a Guitar 
 * object, add all of the desired notes to the object, and then 
 * call the play() method.  The play() method will generate a 
 * list of samples for all of the notes to be played (by calling 
 * an internal method (jaffeSmith())) and then send them to the 
 * audio output stream. 
 * </span><span class="s3">@author </span><span class="s0">t a y l o r@msoe.edu, albiterri@msoe.edu 
 * </span><span class="s3">@version </span><span class="s0">2016.04.18_2.2 
 */</span><span class="s1"> 
</span><span class="s2">public class </span><span class="s1">Guitar { 
    </span><span class="s0">/**  
     * Default sample rate in Hz  
     */</span><span class="s1"> 
    </span><span class="s2">private static final int </span><span class="s1">DEFAULT_SAMPLE_RATE = </span><span class="s4">8000</span><span class="s1">; 
     
    </span><span class="s0">/**  
     * Maximum sample rate in Hz 
     */</span><span class="s1"> 
    </span><span class="s2">private static final int </span><span class="s1">MAX_SAMPLE_RATE = </span><span class="s4">48000</span><span class="s1">; 
     
    </span><span class="s0">/**  
     * Default decay rate 
     */</span><span class="s1"> 
    </span><span class="s2">private static final float </span><span class="s1">DEFAULT_DECAY_RATE = </span><span class="s4">0.99f</span><span class="s1">; 
     
    </span><span class="s0">/** 
     * Queue of notes  
     */</span><span class="s1"> 
    </span><span class="s2">private </span><span class="s1">Queue&lt;Note&gt; notes = </span><span class="s2">new </span><span class="s1">LinkedList&lt;&gt;(); 
     
    </span><span class="s0">/** 
     *  Sample rate in samples per second  
     */</span><span class="s1"> 
    </span><span class="s2">private int </span><span class="s1">sampleRate; 
     
    </span><span class="s0">/**  
     * Decay rate  
     */</span><span class="s1"> 
    </span><span class="s2">private float </span><span class="s1">decayRate; 
         
    </span><span class="s0">/** 
     * Constructs a new Guitar object with the default sample rate 
     * and decay rate. 
     */</span><span class="s1"> 
    </span><span class="s2">public </span><span class="s1">Guitar() { 
 
        </span><span class="s2">this</span><span class="s1">.sampleRate = DEFAULT_SAMPLE_RATE; 
        </span><span class="s2">this</span><span class="s1">.decayRate = DEFAULT_DECAY_RATE; 
    } 
     
    </span><span class="s0">/** 
     * Constructs a new Guitar object with the specified parameters. 
     * If an invalid sampleRate or decayRate is specified, the 
     * default value will be used and an error message is sent to 
     * System.err. 
     * </span><span class="s3">@param </span><span class="s0">sampleRate sample rate (between 8000 Hz and 48000 Hz) 
     * </span><span class="s3">@param </span><span class="s0">decayRate decay rate (between 0.0f and 1.0f) 
     */</span><span class="s1"> 
    </span><span class="s2">public </span><span class="s1">Guitar(</span><span class="s2">int </span><span class="s1">sampleRate, </span><span class="s2">float </span><span class="s1">decayRate) { 
 
        </span><span class="s2">if</span><span class="s1">(sampleRate &lt; DEFAULT_SAMPLE_RATE || 
                sampleRate &gt; MAX_SAMPLE_RATE || 
                decayRate &lt; </span><span class="s4">0.0f </span><span class="s1">|| decayRate &gt; DEFAULT_DECAY_RATE) { 
 
            System.err.print(</span><span class="s5">&quot;Your rates either exceeded or are below the standard. Try &quot; </span><span class="s1">+ 
                    </span><span class="s5">&quot;another rate for either SampleRate or DecayRate&quot;</span><span class="s1">); 
        } </span><span class="s2">else </span><span class="s1">{ 
            </span><span class="s2">this</span><span class="s1">.sampleRate = sampleRate; 
            </span><span class="s2">this</span><span class="s1">.decayRate = decayRate; 
        } 
    } 
         
    </span><span class="s0">/** 
     * Adds the specified note to this Guitar. 
     * </span><span class="s3">@param </span><span class="s0">note Note to be added. 
     */</span><span class="s1"> 
    </span><span class="s2">public void </span><span class="s1">addNote(Note note) { 
        </span><span class="s2">if</span><span class="s1">(note != </span><span class="s2">null</span><span class="s1">) { 
            notes.add(note); 
        } 
    } 
     
    </span><span class="s0">/** 
     * Generates the audio samples for the notes listed in the 
     * current Guitar object by calling the jaffeSmith algorithm and 
     * sends the samples to the speakers. 
     * </span><span class="s3">@throws </span><span class="s0">LineUnavailableException If audio line is unavailable. 
     * </span><span class="s3">@throws </span><span class="s0">IOException If any other input/output problem is encountered. 
     */</span><span class="s1"> 
    </span><span class="s2">public void </span><span class="s1">play() </span><span class="s2">throws </span><span class="s1">LineUnavailableException, IOException { 
        </span><span class="s2">new </span><span class="s1">SimpleAudio().play(jaffeSmith()); 
    } 
 
    </span><span class="s0">/** 
     * Uses the Jaffe-Smith algorithm to generate the audio samples. 
     * </span><span class="s6">&lt;br /&gt;</span><span class="s0">Implementation note:</span><span class="s6">&lt;br /&gt;</span><span class="s0"> 
     * Use Jaffe-Smith algorithm described on the assignment page 
     * to generate a sequence of samples for each note in the list 
     * of notes. 
     *  
     * </span><span class="s3">@return </span><span class="s0">List of samples comprising the pluck sound(s). 
     */</span><span class="s1"> 
    </span><span class="s2">private </span><span class="s1">List&lt;Float&gt; jaffeSmith() { 
 
        List&lt;Float&gt; samples = </span><span class="s2">new </span><span class="s1">LinkedList&lt;&gt;(); 
        </span><span class="s2">final int </span><span class="s1">MILLISECOND_TO_SECONDS = </span><span class="s4">1000</span><span class="s1">; 
        Random randSample = </span><span class="s2">new </span><span class="s1">Random(); 
 
        </span><span class="s2">for</span><span class="s1">(Note n: notes) { 
            </span><span class="s2">float </span><span class="s1">samplesPerPeriod = sampleRate / n.getFrequency(); 
            </span><span class="s2">float </span><span class="s1">numberOfSamples = sampleRate * (n.getDuration() / MILLISECOND_TO_SECONDS); 
            Queue&lt;Float&gt; periodSamples = </span><span class="s2">new </span><span class="s1">LinkedList&lt;&gt;(); 
            </span><span class="s2">float </span><span class="s1">previousSample = </span><span class="s4">0</span><span class="s1">; 
            </span><span class="s2">for</span><span class="s1">(</span><span class="s2">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s1">; i &lt; samplesPerPeriod; i++) { 
                </span><span class="s2">float </span><span class="s1">randValue = randSample.nextFloat() * </span><span class="s4">2 </span><span class="s1">- </span><span class="s4">1</span><span class="s1">; 
                periodSamples.add(randValue); 
            } 
            </span><span class="s2">for</span><span class="s1">(</span><span class="s2">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s1">; i &lt; numberOfSamples; i++) { 
 
                </span><span class="s2">float </span><span class="s1">currentSample = periodSamples.remove(); 
                </span><span class="s2">float </span><span class="s1">newSample = decayRate*((previousSample + currentSample)/</span><span class="s4">2</span><span class="s1">); 
                periodSamples.add(newSample); 
                samples.add(newSample); 
                previousSample = currentSample; 
            } 
        } 
        </span><span class="s2">return </span><span class="s1">samples; 
    } 
 
    </span><span class="s0">/** 
     * Returns an array containing all the notes in this Guitar. 
     * OPTIONAL 
     * </span><span class="s3">@return </span><span class="s0">An array of Notes in the Guitar object. 
     */</span><span class="s1"> 
    </span><span class="s2">public </span><span class="s1">Note[] getNotes() { 
        </span><span class="s2">throw new </span><span class="s1">UnsupportedOperationException(</span><span class="s5">&quot;Optional method not implemented&quot;</span><span class="s1">); 
    } 
     
    </span><span class="s0">/** 
     * Creates a new file and writes to that file. 
     * OPTIONAL 
     * </span><span class="s3">@param </span><span class="s0">file File to write to. 
     * </span><span class="s3">@throws </span><span class="s0">IOException If any other input/output problem is encountered. 
     */</span><span class="s1"> 
    </span><span class="s2">public void </span><span class="s1">write(File file) </span><span class="s2">throws </span><span class="s1">IOException { 
        </span><span class="s2">throw new </span><span class="s1">UnsupportedOperationException(</span><span class="s5">&quot;Optional method not implemented&quot;</span><span class="s1">); 
    } 
} 
</span></pre>
</body>
</html>